---
title: 'Homework - CUNY DATA 624 Sum I'
subtitle: 'Group 1: Daniel Sullivan, Jeff Parks, Lwin Shwe, Matthew Katz'
format:
  docx:
    highlight-style: arrow
page-layout: article
editor: visual
---

```{r setup, include=FALSE}
# chunks
knitr::opts_chunk$set(echo=TRUE, eval=TRUE, include=TRUE, message=FALSE, 
warning=FALSE, fig.show="hold", out.width="100%", fig.height=4)

# libraries
library(tidyverse)
library(kableExtra)
library(fpp2)

# ggplot
theme_set(theme_light())
```

## HA Exercise 2.3

Download some monthly Australian retail data from the book website. These represent retail sales in various categories for different Australian states, and are stored in a MS-Excel file.

Select one of the time series ... explore your chosen retail time series using the following functions: autoplot(), ggseasonplot(), ggsubseriesplot(), gglagplot(), ggAcf()

Can you spot any seasonality, cyclicity and trend? What do you learn about the series?

{{< pagebreak >}}

We've selected product `A3349790V`, which appears to display a gradually increasing trend over the 30 years with strong annual seasonality in the month of December, when sales spike dramatically and then quickly drop. There may also be a cyclic pattern present (though very slight) as the overall trend seems to increase and level off again every 10 years.

This simple time-series plot suggests the product in question might be a long-lived, high-selling item during the traditional holiday season, and that it may in fact be somewhat demand-inelastic during times of economic recession.

```{r}
retaildata <- readxl::read_excel('data/retail.xlsx', skip=1)
myts <- ts(retaildata[,'A3349790V'], frequency=12, start=c(1982,4))
```

```{r}
autoplot(myts) +
  ggtitle('Monthly Product Sales: A3349790V') +
  xlab('Year') + ylab('Sales')
```

{{< pagebreak >}}

The seasonal time-series `ggseasonplot` supports this hypothesis, demonstrating a consistent seasonal trend with sales spiking every December.

```{r}
ggseasonplot(myts) +
  ggtitle('Seasonal Plot: A3349790V') +
  xlab('Month') + ylab('Sales')
```

{{< pagebreak >}}

Another view of this seasonality is provided by `ggsubseriesplot`, demonstrating that average product sales seem to double during the month of December, versus their normal monthly sales levels.

However we also note that overall sales in all months seem to have leveled off in recent years, illustrated by the flattening curves towards the right of each monthly subseries.

```{r}
ggsubseriesplot(myts) +
  ggtitle('Subseries Plot: A3349790V') +
  xlab('Month') + ylab('Sales')
```

{{< pagebreak >}}

The observation that a strong, 12-month seasonal cycle is present in these sales data is backed up by the `gglagplot`, which shows almost-perfect alignment at "lag 12".

```{r}
gglagplot(myts) +
  ggtitle('Lag Plot: A3349790V')
```

{{< pagebreak >}}

The Autocorrelation Function (ACF) also supports this observation, with strong autocorrelations at multiples of the 12-month seasonal frequency.

```{r}
ggAcf(myts) +
  ggtitle('ACF Plot: A3349790V') 
```
